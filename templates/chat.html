<!DOCTYPE html>
<html>
<head>
	<title>Welcome</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>

	<script type="text/javascript">
         var socket = io();
            socket.on('connect', function() {
            console.log('Connected to the server!');
         });
		window.addEventListener('DOMContentLoaded', (event) => {
			if (localStorage.getItem("username") != null) {
				unf=localStorage.getItem("username");
				document.querySelector("#" + unf + "").style.display = "none";
			}
		});
		var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);
		socket.on('anewuser',function(data){
			console.log("A new user added:"+data['user[1]']);
			const list = document.createElement('li');
			list.setAttribute("class", "list-group-item");
			list.setAttribute("href", "../u/"+data['user']+"");
			list.innerHTML=`<a style="color:black;text-decoration:none;" href="../u/${data['user[1]']}">${data['user[1]']}</a>`;
			document.querySelector('#channels_lists').append(list);
		});
		
	</script>
	<style type="text/css">
		nav{
			background-color: #1123e6;
			background-image: linear-gradient(315deg, #1123e6 0%, #1123e6 74%);
			color:white;
		}
		.nav-tabs li a{
			color:white;
		}
		.nav-tabs{
			text-align: center;
			width: 100%;
		}

		.navbar{
			padding-bottom: 0;
			padding-left: 0;
			padding-right: 0;
		}
		.list-group-item:hover{
			background-color: #DCDCDC;
		}
	</style>
</head>
<body>
		<ul class="nav nav-tabs nav-justified justify-content-center">
			<li class="nav-item">
				<h3 class="nav-link active" style="background-color: #1123e6; color: white;">User Chat</h3>
			</li>
			
		</ul>
	</nav>
	<div class="card" style="width: 100%;">
		<ul id="channels_lists" class="list-group list-group-flush">
			{% for user in acc %}
				<a style="color:black;text-decoration:none;cursor: pointer;" id="{{ user[1] }}" href="../builderchat/{{ user[1] }}">
                    <li class="list-group-item">{{ user[1] }}</li>
                    
				</a>
			{% endfor %}
	  </ul>
	</div>
</body>
</html>